![pyngrok - a Python wrapper for ngrok](https://pyngrok.readthedocs.io/en/stable/_images/logo.png) [![https://badge.fury.io/py/pyngrok.svg](https://badge.fury.io/py/pyngrok.svg)](https://badge.fury.io/py/pyngrok) [![https://github.com/alexdlaird/pyngrok/workflows/CI/CD/badge.svg](https://github.com/alexdlaird/pyngrok/workflows/CI/CD/badge.svg)](https://github.com/alexdlaird/pyngrok/actions?query=workflow%3ACI%2FCD) [![https://codecov.io/gh/alexdlaird/pyngrok/branch/master/graph/badge.svg](https://codecov.io/gh/alexdlaird/pyngrok/branch/master/graph/badge.svg)](https://codecov.io/gh/alexdlaird/pyngrok) [![https://readthedocs.org/projects/pyngrok/badge/?version=latest](https://readthedocs.org/projects/pyngrok/badge/?version=latest)](https://pyngrok.readthedocs.io/en/latest/?badge=latest) [![https://img.shields.io/pypi/pyversions/pyngrok.svg](https://img.shields.io/pypi/pyversions/pyngrok.svg)](https://pypi.org/project/pyngrok/) [![https://img.shields.io/pypi/l/pyngrok.svg](https://img.shields.io/pypi/l/pyngrok.svg)](https://pypi.org/project/pyngrok/) [![https://img.shields.io/twitter/url/http/shields.io.svg?style=social](https://img.shields.io/twitter/url/http/shields.io.svg?style=social)](https://twitter.com/intent/tweet?text=Check+out+%23pyngrok%2C+a+Python+wrapper+for+%23ngrok+that+lets+you+programmatically+open+secure+%23tunnels+to+local+web+servers%2C+build+%23webhook+integrations%2C+enable+SSH+access%2C+test+chatbots%2C+demo+from+your+own+machine%2C+and+more.%0D%0A%0D%0A&url=https://github.com/alexdlaird/pyngrok&via=alexdlaird)

`pyngrok` is a Python wrapper for `ngrok` that manages its own binary and puts it on your path, making `ngrok` readily available from anywhere on the command line and via a convenient Python API.

[ngrok](https://ngrok.com/) is a reverse proxy tool that opens secure tunnels from public URLs to localhost, perfect for exposing local web servers, building webhook integrations, enabling SSH access, testing chatbots, demoing from your own machine, and more, and its made even more powerful with native Python integration through `pyngrok`.

## Installation[¶](https://pyngrok.readthedocs.io/en/stable/#installation "Permalink to this headline")

`pyngrok` is available on [PyPI](https://pypi.org/project/pyngrok/) and can be installed using `pip`:

or `conda`:

```
conda install -c conda-forge pyngrok

```

That’s it! `pyngrok` is now available [as a package to our Python projects](https://pyngrok.readthedocs.io/en/stable/#open-a-tunnel), and `ngrok` is now available [from the command line](https://pyngrok.readthedocs.io/en/stable/#command-line-usage).

## Open a Tunnel[¶](https://pyngrok.readthedocs.io/en/stable/#open-a-tunnel "Permalink to this headline")

To open a tunnel, use the [`connect`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.connect "pyngrok.ngrok.connect") method, which returns a [`NgrokTunnel`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.NgrokTunnel "pyngrok.ngrok.NgrokTunnel"), and this returned object has a reference to the public URL generated by `ngrok` in its `public_url` attribute.

```
from pyngrok import ngrok

# Open a HTTP tunnel on the default port 80
# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
http_tunnel = ngrok.connect()
# Open a SSH tunnel
# <NgrokTunnel: "tcp://0.tcp.ngrok.io:12345" -> "localhost:22">
ssh_tunnel = ngrok.connect(22, "tcp")

```

The [`connect`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.connect "pyngrok.ngrok.connect") method takes `kwargs` as well, which allows us to pass additional properties that are [supported by ngrok](https://ngrok.com/docs#tunnel-definitions), [as shown below](https://pyngrok.readthedocs.io/en/stable/#passing-options-as-kwargs).

Note

`ngrok`’s default behavior for `http` when no additional properties are passed is to open _two_ tunnels, one `http` and one `https`. `pyngrok`’s [`connect`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.connect "pyngrok.ngrok.connect") method will return a reference to the `http` tunnel in this case. If only a single tunnel is needed, pass `bind_tls=True` and a reference to the `https` tunnel will be returned.

## Get Active Tunnels[¶](https://pyngrok.readthedocs.io/en/stable/#get-active-tunnels "Permalink to this headline")

It can be useful to ask the `ngrok` client what tunnels are currently open. This can be accomplished with the [`get_tunnels`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.get_tunnels "pyngrok.ngrok.get_tunnels") method, which returns a list of [`NgrokTunnel`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.NgrokTunnel "pyngrok.ngrok.NgrokTunnel") objects.

```
from pyngrok import ngrok

# [<NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">]
tunnels = ngrok.get_tunnels()

```

## Close a Tunnel[¶](https://pyngrok.readthedocs.io/en/stable/#close-a-tunnel "Permalink to this headline")

All open tunnels will automatically be closed when the Python process terminates, but we can also close them manually with [`disconnect`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.disconnect "pyngrok.ngrok.disconnect").

```
from pyngrok import ngrok

# The NgrokTunnel returned from methods like connect(),
# get_tunnels(), etc. contains the public URL
ngrok.disconnect(ngrok_tunnel.public_url)

```

## The `ngrok` Process[¶](https://pyngrok.readthedocs.io/en/stable/#the-ngrok-process "Permalink to this headline")

Opening a tunnel will start the `ngrok` process. This process will remain alive, and the tunnels open, until [`kill`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.kill "pyngrok.ngrok.kill") is invoked, or until the Python process terminates.

If we are building a short-lived app, for instance a CLI, we may want to block on the `ngrok` process so tunnels stay open until the user intervenes. We can do that by accessing the [`NgrokProcess`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.process.NgrokProcess "pyngrok.process.NgrokProcess").

```
from pyngrok import ngrok

ngrok_process = ngrok.get_ngrok_process()

try:
    # Block until CTRL-C or some other terminating event
    ngrok_process.proc.wait()
except KeyboardInterrupt:
    print(" Shutting down server.")

    ngrok.kill()

```

The [`NgrokProcess`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.process.NgrokProcess "pyngrok.process.NgrokProcess") contains an `api_url` variable, usually initialized to [http://127.0.0.1:4040](http://127.0.0.1:4040/), from which we can access the [ngrok client API](https://ngrok.com/docs#client-api).

Note

If some feature we need is not available in this package, the client API is accessible to us via the [`api_request`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.api_request "pyngrok.ngrok.api_request") method. Additionally, the [`NgrokTunnel`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.NgrokTunnel "pyngrok.ngrok.NgrokTunnel") objects expose a `uri` variable, which contains the relative path used to manipulate that resource against the client API.

This package also gives us access to `ngrok` from the command line, [as shown below](https://pyngrok.readthedocs.io/en/stable/#command-line-usage).

## Event Logs[¶](https://pyngrok.readthedocs.io/en/stable/#event-logs "Permalink to this headline")

When `ngrok` emits logs, `pyngrok` can surface them to a callback function. To register this callback, use [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig") and pass the function as `log_event_callback`. Each time a log is processed, this function will be called, passing a [`NgrokLog`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.process.NgrokLog "pyngrok.process.NgrokLog") as its only parameter.

```
from pyngrok import conf, ngrok

def log_event_callback(log):
    print(str(log))

conf.get_default().log_event_callback = log_event_callback

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

If these events aren’t necessary for our use case, some resources can be freed up by turning them off. Set `monitor_thread` to `False` in [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"):

```
from pyngrok import conf, ngrok

conf.get_default().monitor_thread = False

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

Alternatively, [`stop_monitor_thread`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.process.NgrokProcess.stop_monitor_thread "pyngrok.process.NgrokProcess.stop_monitor_thread") can be used to stop monitoring on a running process:

```
import time

from pyngrok import ngrok

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()
time.sleep(1)
ngrok.get_ngrok_process().stop_monitor_thread()

```

## Expose Other Services[¶](https://pyngrok.readthedocs.io/en/stable/#expose-other-services "Permalink to this headline")

Using `ngrok` we can expose any number of non-HTTP services, for instances databases, game servers, etc. This can be accomplished by using `pyngrok` to open a `tcp` tunnel to the desired service.

```
from pyngrok import ngrok

# Open a tunnel to MySQL with a Reserved TCP Address
# <NgrokTunnel: "tcp://1.tcp.ngrok.io:12345" -> "localhost:3306">
ngrok.connect(3306, "tcp",
              remote_addr="1.tcp.ngrok.io:12345")

```

We can also serve up local directories via [ngrok’s built-in fileserver](https://ngrok.com/docs#http-file-urls).

```
from pyngrok import ngrok

# Open a tunnel to a local file server
# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "file:///">
ngrok.connect("file:///")

```

## Configuration[¶](https://pyngrok.readthedocs.io/en/stable/#configuration "Permalink to this headline")

### `PyngrokConfig`[¶](https://pyngrok.readthedocs.io/en/stable/#pyngrokconfig "Permalink to this headline")

`pyngrok`’s interactions with the `ngrok` binary can be configured using [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"). The default `pyngrok_config` object can updated with our own object using [`set_default`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.set_default "pyngrok.conf.set_default"):

```
from pyngrok import conf

pyngrok_config = conf.PyngrokConfig(log_event_callback=log_event_callback,
                                    max_logs=10)
conf.set_default(pyngrok_config)

```

Most methods in the [`ngrok`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.ngrok "pyngrok.ngrok") module also accept a `pyngrok_config` keyword arg, which can be used to pass in the config rather than updating the default as shown above.

The `pyngrok_config` argument is only used when the `ngrok` process is first started, which will be the first time most methods in the [`ngrok`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.ngrok "pyngrok.ngrok") module are called. We can check if a process is already or still running by calling its [`healthy`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.process.NgrokProcess.healthy "pyngrok.process.NgrokProcess.healthy") method.

Note

If `ngrok` is not already installed at the `ngrok_path` in [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"), it will be installed the first time most methods in the [`ngrok`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.ngrok "pyngrok.ngrok") module are called.

If we need to customize the installation of `ngrok`, perhaps specifying a timeout, proxy, use a custom mirror for the download, etc. we can do so by leveraging the [`installer`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.installer "pyngrok.installer") module. Keyword arguments in this module are ultimately passed down to [`urllib.request.urlopen`](https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen "(in Python v3.9)"), so as long as we use the [`installer`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.installer "pyngrok.installer") module ourselves prior to invoking any [`ngrok`](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.ngrok "pyngrok.ngrok") methods, we can can control how `ngrok` is installed and from where.

### Setting the `authtoken`[¶](https://pyngrok.readthedocs.io/en/stable/#setting-the-authtoken "Permalink to this headline")

Running `ngrok` with an auth token enables additional features available on our account (for instance, the ability to open multiple tunnels concurrently). We can obtain our auth token from the [ngrok dashboard](https://dashboard.ngrok.com/) and install it to `ngrok`’s config file like this:

```
from pyngrok import ngrok

# Setting an auth token allows us to open multiple
# tunnels at the same time
ngrok.set_auth_token("<NGROK_AUTH_TOKEN>")

# <NgrokTunnel: "http://<public_sub1>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel1 = ngrok.connect()
# <NgrokTunnel: "http://<public_sub2>.ngrok.io" -> "http://localhost:8000">
ngrok_tunnel2 = ngrok.connect(8000)

```

We can also override `ngrok`’s installed auth token using [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"):

```
from pyngrok import conf, ngrok

conf.get_default().auth_token = "<NGROK_AUTH_TOKEN>"

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

### Setting the `region`[¶](https://pyngrok.readthedocs.io/en/stable/#setting-the-region "Permalink to this headline")

By default, `ngrok` will open a tunnel in the `us` region. To override this, use the `region` parameter in [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"):

```
from pyngrok import conf, ngrok

conf.get_default().region = "au"

# <NgrokTunnel: "http://<public_sub>.au.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

### Passing `options` as `kwargs`[¶](https://pyngrok.readthedocs.io/en/stable/#passing-options-as-kwargs "Permalink to this headline")

It is possible to configure the tunnel when it is created, for instance adding authentication, a subdomain, or other tunnel properties [supported by ngrok](https://ngrok.com/docs#tunnel-definitions). This is accomplished by passing these `options` as additional `kwargs` to [`connect`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.ngrok.connect "pyngrok.ngrok.connect"), then they will be used as properties for the tunnel when it is created.

Here is an example starting `ngrok` in Australia, then opening a tunnel with subdomain `foo` that requires basic authentication for requests.

```
from pyngrok import conf, ngrok

conf.get_default().region = "au"

# <NgrokTunnel: "http://foo.au.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect(subdomain="foo",
                             auth="username:password")

```

### Config File[¶](https://pyngrok.readthedocs.io/en/stable/#config-file "Permalink to this headline")

By default, [ngrok will look for its config file](https://ngrok.com/docs#config) in the home directory’s `.ngrok2` folder. We can override this behavior by updating our default [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"):

```
from pyngrok import conf, ngrok

conf.get_default().config_path = "/opt/ngrok/config.yml"

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

### Binary Path[¶](https://pyngrok.readthedocs.io/en/stable/#binary-path "Permalink to this headline")

The `pyngrok` package manages its own `ngrok` binary. We can use our `ngrok` binary if we want by updating the default [`PyngrokConfig`](https://pyngrok.readthedocs.io/en/stable/api.html#pyngrok.conf.PyngrokConfig "pyngrok.conf.PyngrokConfig"):

```
from pyngrok import conf, ngrok

conf.get_default().ngrok_path = "/usr/local/bin/ngrok"

# <NgrokTunnel: "http://<public_sub>.ngrok.io" -> "http://localhost:80">
ngrok_tunnel = ngrok.connect()

```

## Command Line Usage[¶](https://pyngrok.readthedocs.io/en/stable/#command-line-usage "Permalink to this headline")

This package puts the default `ngrok` binary on our path, so all features of `ngrok` are also available on the command line.

For details on how to fully leverage `ngrok` from the command line, see [ngrok’s official documentation](https://ngrok.com/docs).

## Python 2.7[¶](https://pyngrok.readthedocs.io/en/stable/#python-2-7 "Permalink to this headline")

The last version of `pyngrok` that supports Python 2.7 is 4.1.x, so we need to pin `pyngrok>=4.1,<4.2` if we still want to use `pyngrok` with this version of Python. Its legacy documentation can be found [here](https://pyngrok.readthedocs.io/en/4.1.x/).

## Dive Deeper[¶](https://pyngrok.readthedocs.io/en/stable/#dive-deeper "Permalink to this headline")

For more advanced usage, integration examples, and tips to troubleshoot common issues, dive deeper in to the rest of the documentation.

-   [API Documentation](https://pyngrok.readthedocs.io/en/stable/api.html)
    -   [Main `ngrok` Interface](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.ngrok)
    -   [Process Management](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.process)
    -   [Configuration](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.conf)
    -   [`ngrok` Installer](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.installer)
    -   [Exceptions](https://pyngrok.readthedocs.io/en/stable/api.html#module-pyngrok.exception)
-   [Integration Examples](https://pyngrok.readthedocs.io/en/stable/integrations.html)
    -   [Flask](https://pyngrok.readthedocs.io/en/stable/integrations.html#flask)
    -   [Django](https://pyngrok.readthedocs.io/en/stable/integrations.html#django)
    -   [FastAPI](https://pyngrok.readthedocs.io/en/stable/integrations.html#fastapi)
    -   [Google Colaboratory](https://pyngrok.readthedocs.io/en/stable/integrations.html#google-colaboratory)
    -   [End-to-End Testing](https://pyngrok.readthedocs.io/en/stable/integrations.html#end-to-end-testing)
    -   [AWS Lambda (Local)](https://pyngrok.readthedocs.io/en/stable/integrations.html#aws-lambda-local)
    -   [Python HTTP Server](https://pyngrok.readthedocs.io/en/stable/integrations.html#python-http-server)
    -   [Python TCP Server and Client](https://pyngrok.readthedocs.io/en/stable/integrations.html#python-tcp-server-and-client)
-   [Troubleshooting](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html)
    -   [Test on the Command Line](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#test-on-the-command-line)
    -   [Enable Logging to the Console](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#enable-logging-to-the-console)
    -   [Programmatically Inspect the Logs](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#programmatically-inspect-the-logs)
    -   [Test in the Python Console](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#test-in-the-python-console)
    -   [Check the Inspector at http://localhost:4040](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#check-the-inspector-at-http-localhost-4040)
    -   [`ngrok` Documentation](https://pyngrok.readthedocs.io/en/stable/troubleshooting.html#ngrok-documentation)

## Contributing[¶](https://pyngrok.readthedocs.io/en/stable/#contributing "Permalink to this headline")

If you find issues, [report them on GitHub](https://github.com/alexdlaird/pyngrok/issues).

If you would like to contribute to the code, the process is pretty simple:

1.  Familiarise yourself with this package, [pyngrok’s APIs](https://pyngrok.readthedocs.io/en/latest/api.html) and other documentation, and [ngrok’s documentation](https://ngrok.com/docs).
2.  Fork [the repository on GitHub](https://github.com/alexdlaird/pyngrok) and start implementing changes.
3.  Write a test that plainly validates the changes made.
4.  Build and test locally with `make local test`
5.  Submit a [pull requests](https://help.github.com/en/articles/creating-a-pull-request-from-a-fork) to get the changes merged.

Also be sure to review the [Code of Conduct](https://github.com/alexdlaird/pyngrok/blob/main/CODE_OF_CONDUCT.md) before submitting issues or pull requests.

Want to contribute financially? If you’ve found `pyngrok` useful, [a donation](https://www.paypal.me/alexdlaird) would also be greatly appreciated!